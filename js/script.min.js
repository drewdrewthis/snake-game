/*
 snake-game 2016-02-28 
*/
function quad(a){return $("[data-xcoord="+a[0]+"][data-ycoord="+a[1]+"]")}function makeFruits(){var a=Math.floor(49*Math.random())+1,b=Math.floor(49*Math.random())+1;quad([a,b]).addClass("fruit"),console.log("New Fruit: "+a+","+b)}function setup(){$(".board").html(""),$(".board").css("height",$(".board").width()),score=0,$("#score").text(score),paused=!0,direction="right",snake=[[24,24]],head=snake.length-1;for(var a=0;50>a;a++)for(var b=0;50>b;b++)$(".board").append('<div class="quadrant" data-xcoord="'+b+'" data-ycoord="'+a+'"></div>');makeFruits(),quad(snake[0]).addClass("snake")}function pauseGame(){paused?(progress_snake(snake),$("#start_stop").text("Pause"),paused=!1):(paused=!0,$("#start_stop").text("Resume"))}function isOver(a){return quad(a).hasClass("snake")?(console.log("Over! Bit its tail! "+a),!0):a[0]>=50||a[1]>=50||a[0]<0||a[1]<0?(console.log("Over! Crashed into the wall! "+a),!0):!1}function growSnake(a){snake.push(a),head=snake.length-1}function isFruit(a){return quad(a).hasClass("fruit")?(score++,$("#score").text(score),!0):!1}function progress_snake(a){var b=a[head][0],c=a[head][1],d=[b,c];switch(direction){case"left":d[0]--;break;case"up":d[1]--;break;case"right":d[0]++;break;case"down":d[1]++}var e=setTimeout(function(){if(isOver(d))clearTimeout(e);else{if(isFruit(d))quad(d).removeClass("fruit"),makeFruits(),growSnake(d);else{quad(a[0]).removeClass("snake");for(var b=0;b<a.length-1;b++)a[b]=a[b+1];a[head]=d}quad(a[head]).addClass("snake"),paused||progress_snake(a)}},100)}var direction,snake,head,paused,score;$(document).ready(function(){setup(),$("#start_stop").on("tap",function(){return"Pause"==$(this).text()?void pauseGame():"Resume"==$(this).text()?void pauseGame():"Start"==$(this).text()?($(this).text("Pause"),paused=!1,void progress_snake(snake)):void 0}),$("#reset").on("tap",function(){$("#start_stop").text("Start"),setup()}),$("#more_frogs").on("tap",function(){makeFruits()}),$("#left").on("tap",function(){"right"!=direction&&(direction="left",console.log("left"))}),$("#up").on("tap",function(){"down"!=direction&&(direction="up",console.log("up"))}),$("#right").on("tap",function(){"left"!=direction&&(direction="right",console.log("right"))}),$("#down").on("tap",function(){"up"!=direction&&(direction="down",console.log("down"))})}),$(document).keydown(function(a){switch(a.which){case 37:"right"!=direction&&(direction="left",$("#left").addClass("pressed"));break;case 38:"down"!=direction&&(direction="up",$("#up").addClass("pressed"));break;case 39:"left"!=direction&&(direction="right",$("#right").addClass("pressed"));break;case 40:"up"!=direction&&(direction="down",$("#down").addClass("pressed"));break;case 80:case 27:pauseGame();break;default:return}a.preventDefault()}),$(document).keyup(function(a){switch(a.which){case 37:$("#left").removeClass("pressed"),console.log("up");break;case 38:$("#up").removeClass("pressed");break;case 39:$("#right").removeClass("pressed");break;case 40:$("#down").removeClass("pressed");break;default:return}a.preventDefault()});